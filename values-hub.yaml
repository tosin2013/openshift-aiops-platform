# Validated Patterns - Self-Healing Platform
# Hub Cluster Configuration
#
# ============================================================
# üìå REPOSITORY USAGE NOTICE
# ============================================================
# This file uses the official repository by default:
#   https://github.com/tosin2013/openshift-aiops-platform.git
#
# ‚úÖ For testing/evaluation: Use the default repo as-is
# ‚ö†Ô∏è  For heavy customization: Fork the repo and update repoURL
#
# When to fork:
#   - Custom notebooks or models
#   - Modified coordination engine logic
#   - Organization-specific configurations
#   - Long-term production deployment
#
# To use your fork:
#   1. Fork: https://github.com/tosin2013/openshift-aiops-platform
#   2. Update repoURL in clusterGroup.applications.self-healing-platform
#   3. Update repoURL in values-global.yaml git.repoURL
# ============================================================

# Main cluster group configuration
main:
  clusterGroupName: hub
  targetSite: hub
  gitOpsOperator: openshift-gitops
  namespace: self-healing-platform

# Cluster-scoped RBAC managed externally (by Ansible)
# Set to true to prevent ArgoCD from trying to manage ClusterRole/ClusterRoleBinding
# These are created by ansible/roles/validated_patterns_deploy_cluster_resources
clusterRbacManagedExternally: true

# Namespaced RBAC managed externally (by Ansible)
# Set to true to prevent ArgoCD from trying to manage ServiceAccount/Role/RoleBinding
# These are created as prereqs by ansible/roles/validated_patterns_deploy_cluster_resources
namespacedRbacManagedExternally: true

# Image builds configuration
imageBuilds:
  enabled: true
  gitRepository: "https://github.com/tosin2013/openshift-aiops-platform.git"
  gitRef: "main"
  gitCredentialsSecret: "git-credentials-source"  # pragma: allowlist secret
  baseImage: "registry.redhat.io/ubi8/python-39:latest"

# Namespace configuration
namespace:
  create: false  # Namespace already exists
  name: self-healing-platform

# ClusterGroup configuration for hub
clusterGroup:
  name: hub
  isHubCluster: true

  # Operator subscriptions (mark as disabled - already installed)
  subscriptions: {}

  # Namespaces to create
  namespaces:
    - self-healing-platform:
        labels:
          openshift.io/cluster-monitoring: "true"
        annotations:
          openshift.io/description: "Self-Healing Platform for AIOps automation"

  # ArgoCD Applications to deploy
  applications:
    self-healing-platform:
      name: self-healing-platform
      namespace: self-healing-platform
      project: default
      path: charts/hub
      repoURL: "https://github.com/tosin2013/openshift-aiops-platform.git"
      targetRevision: main
      helm:
        valueFiles:
          - /values-global.yaml
          - /values-hub.yaml
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
        syncOptions:
          - CreateNamespace=true
